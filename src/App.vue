<template>
  <h1>Kid Story Ai Generator</h1>
  <h2 v-if="!isGenerated">Generate your story ðŸ“–</h2>
  <PromptForm v-if="!isGenerated" @submit="generateStory" />
  <StoryBlock v-else :title="StoryFromApi.title" :story="StoryFromApi.story" @goBack="goBackToGeneration" />
</template>


<script setup lang="ts">
import { ref, toRaw } from "vue";
import PromptForm from "./components/PromptForm.vue";
import StoryBlock from "./components/StoryBlock.vue";

const isGenerated = ref<boolean>(true);
const StoryFromApi = ref({
  title: "Titre",
  story: [
    {
      paragraph: "Camille avait toujours rÃªvÃ© de partir en voyage autour du monde, mais elle avait toujours eu une bonne raison de repousser ce rÃªve : le travail, la famille, les obligations. Mais un jour, elle a dÃ©cidÃ© qu'elle en avait assez d'attendre et qu'il Ã©tait temps de partir Ã  l'aventure. Elle a rÃ©servÃ© un billet d'avion pour le lendemain et a commencÃ© Ã  prÃ©parer ses affaires. Elle Ã©tait excitÃ©e et un peu effrayÃ©e Ã  l'idÃ©e de partir seule, mais elle savait que c'Ã©tait quelque chose qu'elle devait faire.",
      image: "https://www.imagesource.com/cache/pcache2/00261816.jpg",
    },
    {
      paragraph: "Camille a parcouru des milliers de kilomÃ¨tres, visitÃ© des paysages magnifiques et a rencontrÃ© des gens incroyables. Elle a passÃ© une semaine sur une plage paradisiaque en ThaÃ¯lande, a marchÃ© dans les rues animÃ©es de Tokyo et a fait de la randonnÃ©e dans les montagnes suisses. Mais ce qui l'a le plus marquÃ©, ce sont les rencontres qu'elle a faites. Elle a rencontrÃ© des gens de tous les horizons, des artistes, des entrepreneurs, des Ã©tudiants. Ils ont partagÃ© des histoires et des expÃ©riences qui ont changÃ© sa vie.",
      image: "https://www.tutorialspoint.com/assets/questions/media/426142-1668760872.png",
    },
    {
      paragraph: "Le voyage n'Ã©tait pas toujours facile. Il y avait des moments oÃ¹ Camille se sentait seule, perdue et Ã©puisÃ©e. Elle a dÃ» faire face Ã  des situations difficiles, comme lorsqu'elle a ratÃ© son avion pour le Laos et a dÃ» passer la nuit dans un aÃ©roport bondÃ©. Elle a Ã©galement Ã©tÃ© confrontÃ©e Ã  des barriÃ¨res linguistiques et culturelles qui ont rendu la communication difficile. Mais chaque fois qu'elle a surmontÃ© un dÃ©fi, elle a ressenti un sentiment de fiertÃ© et d'accomplissement.",
      image: "https://www.imagesource.com/cache/pcache2/00261816.jpg",
    },
  ],
});

const generateStory = (formObject: any) => {
  let object = toRaw(formObject);

  if (object.story === '') {
    alert('Please enter a story');
  }
  else if (object.genre === '') {
    alert('Please enter a genre');
  }
  else if (object.style === '') {
    alert('Please enter a style');
  }
  else if (object.characters.length === 0) {
    alert('Please enter a characters');
  }
  else {
    isGenerated.value = true;
    console.log(object);
  }
};

const goBackToGeneration = () => {
  isGenerated.value = false;
  console.log("go back to generation");
};

</script>
<style scoped>
.v-enter-active,
.v-leave-active {
  transition: opacity 0.5s ease;
}

.v-enter-from,
.v-leave-to {
  opacity: 0;
}


#snackbar {
  visibility: hidden;
  min-width: 250px;
  margin-left: -125px;
  background-color: #333;
  color: #fff;
  text-align: center;
  border-radius: 2px;
  padding: 16px;
  position: fixed;
  z-index: 1;
  left: 50%;
  bottom: 30px;
}
</style>